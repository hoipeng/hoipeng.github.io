{"title":"设置MAC版Mysql的配置文件","uid":"cd21b4e6b83aafed33281c82b1994424","slug":"设置MAC版Mysql的配置文件","date":"2022-12-01T02:12:51.000Z","updated":"2022-12-01T02:13:36.155Z","comments":true,"path":"api/articles/设置MAC版Mysql的配置文件.json","keywords":null,"cover":[],"content":"<h1 id=\"设置MAC版Mysql的配置文件\"><a href=\"#设置MAC版Mysql的配置文件\" class=\"headerlink\" title=\"设置MAC版Mysql的配置文件\"></a>设置MAC版Mysql的配置文件</h1><h1 id=\"1-背景\"><a href=\"#1-背景\" class=\"headerlink\" title=\"1. 背景\"></a>1. 背景</h1><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p><span style=\"color:red;\"><strong>Mac安装的Mysql8默认不会生成配置文件所以我需要创建个配置文件去让其加载。</strong></span></p></blockquote>\n<p>使用 Navicat 导入备份的时候，出现了 This function has none of DETERMINISTIC, NO SQL, or READS SQL DATA in its 的错误，备份里面是包含了创建的函数的，在本地环境和服务器环境不一样就报错了。百度后发现是由于以下原因导致：</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>创建函数时必须指定我们的函数是否是</p>\n<ul>\n<li>DETERMINISTIC 不确定的</li>\n<li>NO SQL 没有 SQL 语句，当然也不会修改数据</li>\n<li>READS SQL DATA 只是读取数据，当然也不会修改数据</li>\n<li>MODIFIES SQL DATA 要修改数据</li>\n<li>CONTAINS SQL 包含了 SQL 语句</li>\n</ul>\n<p>解决方法：</p>\n<p>1、在 MySQL 数据库中执行以下语句，<strong>临时生效，重启后失效</strong></p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">set global log_bin_trust_function_creators&#x3D;TRUE;</code></pre>\n\n<p>2、在配置文件 my.ini 的 [mysqld] 配置，<strong>永久生效</strong></p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">log_bin_trust_function_creators&#x3D;1</code></pre></blockquote>\n<p>解决方法如下：</p>\n<p>1、在 MySQL 数据库中执行以下语句，<strong>临时生效，重启后失效</strong></p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">set global log_bin_trust_function_creators&#x3D;TRUE;</code></pre>\n\n<p>2、在配置文件 my.ini 的 [mysqld] 配置，<strong>永久生效</strong></p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">log_bin_trust_function_creators&#x3D;1</code></pre>\n\n<h1 id=\"2-配置文件\"><a href=\"#2-配置文件\" class=\"headerlink\" title=\"2. 配置文件\"></a>2. 配置文件</h1><h2 id=\"2-1-创建my-cnf\"><a href=\"#2-1-创建my-cnf\" class=\"headerlink\" title=\"2.1 创建my.cnf\"></a>2.1 创建my.cnf</h2><p>MySQL默认安装在<code>/usr/local/mysql-8.0.29-macos12-arm64</code></p>\n<p><img src=\"http://nas.hoipeng.cn:9000/picgo/20221128/1669617979-1669617979708-DjaNim.png\" alt=\"image-20221128144619632\"></p>\n<p>在&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;support-files文件夹下创建my.cnf 内容如下：</p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\"># Example MySQL config file for small systems.\n#\n# This is for a system with little memory (&lt;&#x3D; 64M) where MySQL is only used\n# from time to time and it&#39;s important that the mysqld daemon\n# doesn&#39;t use much resources.\n#\n# MySQL programs look for option files in a set of\n# locations which depend on the deployment platform.\n# You can copy this option file to one of those\n# locations. For information about these locations, see:\n# http:&#x2F;&#x2F;dev.mysql.com&#x2F;doc&#x2F;mysql&#x2F;en&#x2F;option-files.html\n#\n# In this file, you can use all long options that a program supports.\n# If you want to know which options a program supports, run the program\n# with the &quot;--help&quot; option.\n# The following options will be passed to all MySQL clients\n[client]\ndefault-character-set&#x3D;utf8\n#password &#x3D; your_password\nport        &#x3D; 3336\nsocket      &#x3D; &#x2F;tmp&#x2F;mysql.sock\n# Here follows entries for some specific programs\n# The MySQL server\n[mysqld]\nsql_mode&#x3D;STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION\ndefault-storage-engine&#x3D;INNODB\ncharacter-set-server&#x3D;utf8\ncollation-server&#x3D;utf8_general_ci\nsocket      &#x3D; &#x2F;tmp&#x2F;mysql.sock\nlog_bin_trust_function_creators&#x3D;1\n# lower_case_table_names &#x3D; 1    # 是否对sql语句大小写敏感，1表示不敏感，即不区分大小写\n# skip-external-locking\n# key_buffer_size &#x3D; 16K\n# max_allowed_packet &#x3D; 1M\n# table_open_cache &#x3D; 4\n# sort_buffer_size &#x3D; 64K\n# read_buffer_size &#x3D; 256K\n# read_rnd_buffer_size &#x3D; 256K\n# net_buffer_length &#x3D; 2K\n# thread_stack &#x3D; 256K   # 该字段根据需要修改，默认是128K，我的是因为启动报了这个字段的错导致启动失败，所以我改成256K了\n\n# Don&#39;t listen on a TCP&#x2F;IP port at all. This can be a security enhancement,\n# if all processes that need to connect to mysqld run on the same host.\n# All interaction with mysqld must be made via Unix sockets or named pipes.\n# Note that using this option without enabling named pipes on Windows\n# (using the &quot;enable-named-pipe&quot; option) will render mysqld useless!\n#\n#skip-networking\nserver-id   &#x3D; 1\n# Uncomment the following if you want to log updates\n#log-bin&#x3D;mysql-bin\n# binary logging format - mixed recommended\n#binlog_format&#x3D;mixed\n# Causes updates to non-transactional engines using statement format to be\n# written directly to binary log. Before using this option make sure that\n# there are no dependencies between transactional and non-transactional\n# tables such as in the statement INSERT INTO t_myisam SELECT * FROM\n# t_innodb; otherwise, slaves may diverge from the master.\n#binlog_direct_non_transactional_updates&#x3D;TRUE\n# Uncomment the following if you are using InnoDB tables\n#innodb_data_home_dir &#x3D; &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data\n#innodb_data_file_path &#x3D; ibdata1:10M:autoextend\n#innodb_log_group_home_dir &#x3D; &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data\n# You can set .._buffer_pool_size up to 50 - 80 %\n# of RAM but beware of setting memory usage too high\n#innodb_buffer_pool_size &#x3D; 16M\n#innodb_additional_mem_pool_size &#x3D; 2M\n# Set .._log_file_size to 25 % of buffer pool size\n#innodb_log_file_size &#x3D; 5M\n#innodb_log_buffer_size &#x3D; 8M\n#innodb_flush_log_at_trx_commit &#x3D; 1\n#innodb_lock_wait_timeout &#x3D; 50\n[mysqldump]\nquick\n# max_allowed_packet &#x3D; 16M\n[mysql]\nno-auto-rehash\n# Remove the next comment character if you are not familiar with SQL\n#safe-updates\n[myisamchk]\n# key_buffer_size &#x3D; 8M\n# sort_buffer_size &#x3D; 8M\n[mysqlhotcopy]\ninteractive-timeout</code></pre>\n\n<h2 id=\"2-2-配置my-cnf\"><a href=\"#2-2-配置my-cnf\" class=\"headerlink\" title=\"2.2 配置my.cnf\"></a>2.2 配置my.cnf</h2><p><img src=\"http://nas.hoipeng.cn:9000/picgo/20221128/1669618022-1669618022331-7MsqRL.png\" alt=\"image-20221128144702256\"></p>\n<h2 id=\"2-3-重启数据库\"><a href=\"#2-3-重启数据库\" class=\"headerlink\" title=\"2.3 重启数据库\"></a>2.3 重启数据库</h2><p><img src=\"http://nas.hoipeng.cn:9000/picgo/20221128/1669617916-1669617916695-GLKxHr.png\" alt=\"截屏2022-11-28 14.44.24\"></p>\n","text":"设置MAC版Mysql的配置文件1. 背景 Mac安装的Mysql8默认不会生成配置文件所以我需要创建个配置文件去让其加载。 使用 Navicat 导入备份的时候，出现了 This function has none of DETERMINISTIC, NO SQL, or RE...","link":"","photos":[],"count_time":{"symbolsCount":"4.4k","symbolsTime":"4 mins."},"categories":[],"tags":[{"name":"MAC","slug":"MAC","count":1,"path":"api/tags/MAC.json"},{"name":"MySQL","slug":"MySQL","count":1,"path":"api/tags/MySQL.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E8%AE%BE%E7%BD%AEMAC%E7%89%88Mysql%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">设置MAC版Mysql的配置文件</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#1-%E8%83%8C%E6%99%AF\"><span class=\"toc-text\">1. 背景</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#2-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">2. 配置文件</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#2-1-%E5%88%9B%E5%BB%BAmy-cnf\"><span class=\"toc-text\">2.1 创建my.cnf</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#2-2-%E9%85%8D%E7%BD%AEmy-cnf\"><span class=\"toc-text\">2.2 配置my.cnf</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#2-3-%E9%87%8D%E5%90%AF%E6%95%B0%E6%8D%AE%E5%BA%93\"><span class=\"toc-text\">2.3 重启数据库</span></a></li></ol></li></ol>","author":{"name":"慎独丶九思","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"君子慎独，不欺暗室。<br />卑以自牧，含章可贞。","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{},"next_post":{}}