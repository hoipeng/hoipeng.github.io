{"title":"Docker容器日志清理","uid":"fd14a765516dcc449f419a4c47c22207","slug":"测试","date":"2022-12-01T12:34:53.000Z","updated":"2022-12-01T13:20:03.611Z","comments":true,"path":"api/articles/测试.json","keywords":null,"cover":[],"content":"<p>1.先查看磁盘空间</p>\n<p>df -h</p>\n<p><img src=\"http://nas.hoipeng.cn:9000/picgo/20211012/1634024567-1634024567230-hCzF1M.png\" alt=\"docker%E5%AE%B9%E5%99%A8%E6%97%A5%E5%BF%97%E6%B8%85%E7%90%86%20-%20%E7%A7%8B%E5%AF%BB%E8%8D%89%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD%208866b22b493348f9a99fa9797b676b47/867526-20190313091800000-1533443971.png\"></p>\n<p>2.找到容器的containerId-json.log文件,并清理(治标不治本，log迟早还会大的)</p>\n<p>查看各个容器的log文件大小</p>\n<p>find &#x2F;var&#x2F;lib&#x2F;docker&#x2F;containers&#x2F; -name *-json.log |xargs du -sh</p>\n<p><img src=\"http://nas.hoipeng.cn:9000/picgo/20211012/1634024567-1634024567325-tUUhtW.png\" alt=\"docker%E5%AE%B9%E5%99%A8%E6%97%A5%E5%BF%97%E6%B8%85%E7%90%86%20-%20%E7%A7%8B%E5%AF%BB%E8%8D%89%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD%208866b22b493348f9a99fa9797b676b47/867526-20190313092250861-607053282.png\"></p>\n<p>执行清理</p>\n<p>$ cat &#x2F;dev&#x2F;null &gt; &#x2F;var&#x2F;lib&#x2F;docker&#x2F;containers&#x2F;dfe25896671f0def031c5ffeb12dd335f7f54212c6ca5d3aca1c3f50b5e1eec4&#x2F;dfe25896671f0def031c5ffeb12dd335f7f54212c6ca5d3aca1c3f50b5e1eec4-json.log</p>\n<p><img src=\"http://nas.hoipeng.cn:9000/picgo/20211012/1634024567-1634024567456-hGI5cq.png\" alt=\"docker%E5%AE%B9%E5%99%A8%E6%97%A5%E5%BF%97%E6%B8%85%E7%90%86%20-%20%E7%A7%8B%E5%AF%BB%E8%8D%89%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD%208866b22b493348f9a99fa9797b676b47/867526-20190313092047394-1269027672.png\"></p>\n<p>3.脚本化清理</p>\n<p>如果docker容器正在运行，那么使用rm -rf方式删除日志后，通过df -h会发现磁盘空间并没有释放。原因是在Linux或者Unix系统中，通过rm -rf或者文件管理器删除文件，将会从文件系统的目录结构上解除链接（unlink）。如果文件是被打开的（有一个进程正在使用），那么进程将仍然可以读取该文件，磁盘空间也一直被占用。正确姿势是cat &#x2F;dev&#x2F;null &gt; *-json.log，当然你也可以通过rm -rf删除后重启docker。接下来，提供一个日志清理脚本clean_docker_log.sh，内容如下：</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">#!&#x2F;bin&#x2F;sh\n\necho &quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; start clean docker containers logs &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;\n\nlogs&#x3D;$(find &#x2F;var&#x2F;lib&#x2F;docker&#x2F;containers&#x2F; -name *-json.log)\n\nfor log in $logs\n\tdo\n\t\techo &quot;clean logs : $log&quot;\n\t\tcat &#x2F;dev&#x2F;null &gt; $log\n\tdone\n\necho &quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; end clean docker containers logs &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;</code></pre>\n\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"># chmod +x clean_docker_log.sh\n# .&#x2F;clean_docker_log.sh</code></pre>\n\n<p>但是，这样清理之后，随着时间的推移，容器日志会像杂草一样，<a href=\"https://www.baidu.com/s?wd=%E5%8D%B7%E5%9C%9F%E9%87%8D%E6%9D%A5&tn=24004469_oem_dg&rsv_dl=gh_pl_sl_csd\">卷土重来</a>。</p>\n<p>4.设置Docker容器日志大小（治本）</p>\n<p>设置一个容器服务的日志大小上限</p>\n<p>上述方法，日志文件迟早又会涨回来。要从根本上解决问题，需要限制容器服务的日志大小上限。这个通过配置容器docker-compose的max-size选项来实现</p>\n<pre class=\"line-numbers language-yaml\" data-language=\"yaml\"><code class=\"language-yaml\">version: &#39;3.3&#39;\nservices:\n  elasticsearch:\n    image: docker.elastic.co&#x2F;elasticsearch&#x2F;elasticsearch:7.5.0\n    container_name: elasticsearch\n    restart: always\n    logging:\n      driver: &quot;json-file&quot;\n      options:\n        max-size: &quot;5g&quot;\n    ports:\n      - 9200:9200\n    environment:\n      - discovery.type&#x3D;single-node\n      - bootstrap.memory_lock&#x3D;true\n      - &quot;ES_JAVA_OPTS&#x3D;-Xms512m -Xmx512m&quot;\n    ulimits:\n      memlock:\n        soft: -1\n        hard: -1\n  skywalking-oap:\n    image: apache&#x2F;skywalking-oap-server:6.6.0-es7\n    container_name: skywalking-oap\n    depends_on:\n      - elasticsearch\n    links:\n      - elasticsearch\n    restart: always\n    logging:\n      driver: &quot;json-file&quot;\n      options:\n        max-size: &quot;5g&quot;\n    ports:\n      - 11800:11800\n      - 12800:12800\n    environment:\n      - SW_STORAGE&#x3D;elasticsearch\n      - SW_STORAGE_ES_CLUSTER_NODES&#x3D;elasticsearch:9200\n  skywalking-ui:\n    image: apache&#x2F;skywalking-ui:6.6.0\n    container_name: skywalking-ui\n    depends_on:\n      - skywalking-oap\n    links:\n      - skywalking-oap\n    restart: always\n    logging:\n      driver: &quot;json-file&quot;\n      options:\n        max-size: &quot;5g&quot;\n    ports:\n      - 8480:8080\n    environment:\n      - SW_OAP_ADDRESS&#x3D;skywalking-oap:12800\n  nmg-monitor:\n    image: renren_io:2.0\n    container_name: nmg-monitor\n    logging:\n      driver: &quot;json-file&quot;\n      options:\n        max-size: &quot;5g&quot;\n    env_file:\n      - common.env\n    volumes:\n      - &#x2F;home&#x2F;xhzc&#x2F;nmg_gwy_cloud&#x2F;jar&#x2F;renren-monitor.jar:&#x2F;app&#x2F;app.jar\n  nmg-gateway:\n    image: renren_io:2.0\n    container_name: nmg-gateway\n    ports:\n      - &quot;8080:8080&quot;\n    links:\n      - skywalking-oap\n    environment:\n      - SW_AGENT_NAME&#x3D;nmg-gateway\n      - SW_AGENT_COLLECTOR_BACKEND_SERVICES&#x3D;skywalking-oap:11800\n    env_file:\n      - common.env\n    volumes:\n      - &#x2F;home&#x2F;xhzc&#x2F;nmg_gwy_cloud&#x2F;jar&#x2F;renren-gateway.jar:&#x2F;app&#x2F;app.jar\n    logging:\n      driver: &quot;json-file&quot;\n      options:\n        max-size: &quot;5g&quot;\n  nmg-auth:\n    image: renren_io:2.0\n    container_name: nmg-auth\n    links:\n      - skywalking-oap\n    environment:\n      - SW_AGENT_NAME&#x3D;nmg-auth\n      - SW_AGENT_COLLECTOR_BACKEND_SERVICES&#x3D;skywalking-oap:11800\n    env_file:\n      - common.env\n    volumes:\n      - &#x2F;home&#x2F;xhzc&#x2F;nmg_gwy_cloud&#x2F;jar&#x2F;renren-auth.jar:&#x2F;app&#x2F;app.jar\n    logging:\n      driver: &quot;json-file&quot;\n      options:\n        max-size: &quot;5g&quot;\n  nmg-admin:\n    image: renren_io:2.0\n    container_name: nmg-admin-server\n    links:\n      - skywalking-oap\n    environment:\n      - SW_AGENT_NAME&#x3D;nmg-admin\n      - SW_AGENT_COLLECTOR_BACKEND_SERVICES&#x3D;skywalking-oap:11800\n    env_file:\n      - common.env\n    volumes:\n      - &#x2F;home&#x2F;xhzc&#x2F;nmg_gwy_cloud&#x2F;jar&#x2F;renren-admin-server.jar:&#x2F;app&#x2F;app.jar\n    logging:\n      driver: &quot;json-file&quot;\n      options:\n        max-size: &quot;5g&quot;\n  nmg-oss:\n    image: renren_io:2.0\n    container_name: nmg-oss-server\n    links:\n      - skywalking-oap\n    environment:\n      - SW_AGENT_NAME&#x3D;nmg-oss-server\n      - SW_AGENT_COLLECTOR_BACKEND_SERVICES&#x3D;skywalking-oap:11800\n    env_file:\n      - common.env\n    volumes:\n      - &#x2F;home&#x2F;xhzc&#x2F;nmg_gwy_cloud&#x2F;jar&#x2F;renren-oss-server.jar:&#x2F;app&#x2F;app.jar\n    logging:\n      driver: &quot;json-file&quot;\n      options:\n        max-size: &quot;5g&quot;\n  nmg-job:\n    image: renren_io:2.0\n    container_name: nmg-job-server\n    links:\n      - skywalking-oap\n    environment:\n      - SW_AGENT_NAME&#x3D;nmg-job-server\n      - SW_AGENT_COLLECTOR_BACKEND_SERVICES&#x3D;skywalking-oap:11800\n    env_file:\n      - common.env\n    volumes:\n      - &#x2F;home&#x2F;xhzc&#x2F;nmg_gwy_cloud&#x2F;jar&#x2F;renren-job-server.jar:&#x2F;app&#x2F;app.jar\n    logging:\n      driver: &quot;json-file&quot;\n      options:\n        max-size: &quot;5g&quot;\n  nmg-message:\n    image: renren_io:2.0\n    container_name: nmg-message-server\n    links:\n      - skywalking-oap\n    environment:\n      - SW_AGENT_NAME&#x3D;nmg-message-server\n      - SW_AGENT_COLLECTOR_BACKEND_SERVICES&#x3D;skywalking-oap:11800\n    env_file:\n      - common.env\n    volumes:\n      - &#x2F;home&#x2F;xhzc&#x2F;nmg_gwy_cloud&#x2F;jar&#x2F;renren-message-server.jar:&#x2F;app&#x2F;app.jar\n    logging:\n      driver: &quot;json-file&quot;\n      options:\n        max-size: &quot;5g&quot;\n  nmg-flow:\n    image: renren_io:2.0\n    container_name: nmg-flow-server\n    links:\n      - skywalking-oap\n    environment:\n      - SW_AGENT_NAME&#x3D;nmg-flow-server\n      - SW_AGENT_COLLECTOR_BACKEND_SERVICES&#x3D;skywalking-oap:11800\n    env_file:\n      - common.env\n    volumes:\n      - &#x2F;home&#x2F;xhzc&#x2F;nmg_gwy_cloud&#x2F;jar&#x2F;renren-flow-server.jar:&#x2F;app&#x2F;app.jar\n    logging:\n      driver: &quot;json-file&quot;\n      options:\n        max-size: &quot;5g&quot;\n  nmg-api:\n    image: renren_io:2.0\n    container_name: nmg-api-server\n    links:\n      - skywalking-oap\n    environment:\n      - SW_AGENT_NAME&#x3D;nmg-api-server\n      - SW_AGENT_COLLECTOR_BACKEND_SERVICES&#x3D;skywalking-oap:11800\n    env_file:\n      - common.env\n    volumes:\n      - &#x2F;home&#x2F;xhzc&#x2F;nmg_gwy_cloud&#x2F;jar&#x2F;renren-api-server.jar:&#x2F;app&#x2F;app.jar\n    logging:\n      driver: &quot;json-file&quot;\n      options:\n        max-size: &quot;5g&quot;\n  nmg-cyyc:\n    image: renren_io:2.0\n    container_name: nmg-cyyc-server\n    links:\n      - skywalking-oap\n    environment:\n      - SW_AGENT_NAME&#x3D;nmg-cyyc-server\n      - SW_AGENT_COLLECTOR_BACKEND_SERVICES&#x3D;skywalking-oap:11800\n    env_file:\n      - common.env\n    volumes:\n      - &#x2F;home&#x2F;xhzc&#x2F;nmg_gwy_cloud&#x2F;jar&#x2F;renren-cyyc-server.jar:&#x2F;app&#x2F;app.jar\n    logging:\n      driver: &quot;json-file&quot;\n      options:\n        max-size: &quot;5g&quot;\n  nmg-metadata:\n    image: renren_io:2.0\n    container_name: nmg-metadata-server\n    links:\n      - skywalking-oap\n    environment:\n      - SW_AGENT_NAME&#x3D;nmg-metadata-server\n      - SW_AGENT_COLLECTOR_BACKEND_SERVICES&#x3D;skywalking-oap:11800\n    env_file:\n      - common.env\n    volumes:\n      - &#x2F;home&#x2F;xhzc&#x2F;nmg_gwy_cloud&#x2F;jar&#x2F;renren-metadata-server.jar:&#x2F;app&#x2F;app.jar\n    logging:\n      driver: &quot;json-file&quot;\n      options:\n        max-size: &quot;5g&quot;\n  nmg-qggb:\n    image: renren_io:2.0\n    container_name: nmg-qggb-server\n    links:\n      - skywalking-oap\n    environment:\n      - SW_AGENT_NAME&#x3D;nmg-qggb-server\n      - SW_AGENT_COLLECTOR_BACKEND_SERVICES&#x3D;skywalking-oap:11800\n    env_file:\n      - common.env\n    volumes:\n      - &#x2F;home&#x2F;xhzc&#x2F;nmg_gwy_cloud&#x2F;jar&#x2F;renren-qggb-server.jar:&#x2F;app&#x2F;app.jar\n    logging:\n      driver: &quot;json-file&quot;\n      options:\n        max-size: &quot;5g&quot;\n  nmg-qggwy:\n    image: renren_io:2.0\n    container_name: nmg-qggwy-server\n    links:\n      - skywalking-oap\n    environment:\n      - SW_AGENT_NAME&#x3D;nmg-qggwy-server\n      - SW_AGENT_COLLECTOR_BACKEND_SERVICES&#x3D;skywalking-oap:11800\n    env_file:\n      - common.env\n    volumes:\n      - &#x2F;home&#x2F;xhzc&#x2F;nmg_gwy_cloud&#x2F;jar&#x2F;renren-qggwy-server.jar:&#x2F;app&#x2F;app.jar\n    logging:\n      driver: &quot;json-file&quot;\n      options:\n        max-size: &quot;5g&quot;\n  nmg-dy:\n    image: renren_io:2.0\n    container_name: nmg-dy-server\n    links:\n      - skywalking-oap\n    environment:\n      - SW_AGENT_NAME&#x3D;nmg-dy-server\n      - SW_AGENT_COLLECTOR_BACKEND_SERVICES&#x3D;skywalking-oap:11800\n    env_file:\n      - common.env\n    volumes:\n      - &#x2F;home&#x2F;xhzc&#x2F;nmg_gwy_cloud&#x2F;jar&#x2F;renren-dy-server.jar:&#x2F;app&#x2F;app.jar\n    logging:\n      driver: &quot;json-file&quot;\n      options:\n        max-size: &quot;5g&quot;\n  nmg-cjgb:\n    image: renren_io:2.0\n    container_name: nmg-cjgb-server\n    links:\n      - skywalking-oap\n    environment:\n      - SW_AGENT_NAME&#x3D;nmg-cjgb-server\n      - SW_AGENT_COLLECTOR_BACKEND_SERVICES&#x3D;skywalking-oap:11800\n    env_file:\n      - common.env\n    volumes:\n      - &#x2F;home&#x2F;xhzc&#x2F;nmg_gwy_cloud&#x2F;jar&#x2F;renren-cjgb-server.jar:&#x2F;app&#x2F;app.jar\n    logging:\n      driver: &quot;json-file&quot;\n      options:\n        max-size: &quot;5g&quot;\n  nmg-datav:\n    image: renren_io:2.0\n    container_name: nmg-datav-server\n    links:\n      - skywalking-oap\n    environment:\n      - SW_AGENT_NAME&#x3D;nmg-datav-server\n      - SW_AGENT_COLLECTOR_BACKEND_SERVICES&#x3D;skywalking-oap:11800\n    env_file:\n      - common.env\n    volumes:\n      - &#x2F;home&#x2F;xhzc&#x2F;nmg_gwy_cloud&#x2F;jar&#x2F;renren-datav-server.jar:&#x2F;app&#x2F;app.jar\n    logging:\n      driver: &quot;json-file&quot;\n      options:\n        max-size: &quot;5g&quot;</code></pre>\n\n<p>重启nginx容器之后，其日志文件的大小就被限制在5GB，再也不用担心了。</p>\n<p>全局设置<br>新建&#x2F;etc&#x2F;docker&#x2F;daemon.json，若有就不用新建了。添加log-dirver和log-opts参数，样例如下：</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>vim &#x2F;etc&#x2F;docker&#x2F;daemon.json</p></blockquote>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">&#123;\n\t&quot;log-dirver&quot;: &quot;json-file&quot;,\n\t&quot;log-opts&quot;: &#123;\n\t\t&quot;max-size&quot;: &quot;5g&quot;,\n\t\t&quot;max-file&quot;: &quot;3&quot;\n\t&#125;\n&#125;</code></pre>\n\n<p>max-size&#x3D;5g，意味着一个容器日志大小上限是5G，<br>max-file&#x3D;3，意味着一个容器有三个日志，分别是id+.json、id+1.json、id+2.json。</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">&#x2F;&#x2F; 重启docker守护进程\nsystemctl daemon-reload\nsystemctl restart docker</code></pre>\n\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p><strong>注意：设置的日志大小，只对新建的容器有效。</strong></p></blockquote>\n<p>参考：[<a href=\"https://blog.csdn.net/yjk13703623757/article/details/80283729]\">https://blog.csdn.net/yjk13703623757/article/details/80283729]</a>(</p>\n","text":"1.先查看磁盘空间 df -h 2.找到容器的containerId-json.log文件,并清理(治标不治本，log迟早还会大的) 查看各个容器的log文件大小 find &#x2F;var&#x2F;lib&#x2F;docker&#x2F;containers&#x2F; ...","link":"","photos":[],"count_time":{"symbolsCount":"11k","symbolsTime":"10 mins."},"categories":[{"name":"程序猿🐒","slug":"程序猿🐒","count":8,"path":"api/categories/程序猿🐒.json"},{"name":"Docker","slug":"程序猿🐒/Docker","count":2,"path":"api/categories/程序猿🐒/Docker.json"}],"tags":[{"name":"Docker","slug":"Docker","count":2,"path":"api/tags/Docker.json"}],"toc":"","author":{"name":"慎独丶九思","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"君子慎独，不欺暗室。<br />卑以自牧，含章可贞。","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"群晖第三方社群套件资源","uid":"59b9e410bb69677d20405f71f974caf1","slug":"群晖第三方社群套件资源","date":"2022-12-01T13:27:07.000Z","updated":"2022-12-01T13:27:59.241Z","comments":true,"path":"api/articles/群晖第三方社群套件资源.json","keywords":null,"cover":[],"text":" 名称 位置 SynoCommunity http://packages.synocommunity.com SynoCommunity(Beta) http://packages.synocommunity.com/?beta=1 ACMENet http://synology...","link":"","photos":[],"count_time":{"symbolsCount":853,"symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"群晖","slug":"群晖","count":1,"path":"api/tags/群晖.json"},{"name":"NAS","slug":"NAS","count":1,"path":"api/tags/NAS.json"}],"author":{"name":"慎独丶九思","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"君子慎独，不欺暗室。<br />卑以自牧，含章可贞。","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"设置MAC版Mysql的配置文件","uid":"cd21b4e6b83aafed33281c82b1994424","slug":"设置MAC版Mysql的配置文件","date":"2022-12-01T02:12:51.000Z","updated":"2022-12-01T02:21:28.022Z","comments":true,"path":"api/articles/设置MAC版Mysql的配置文件.json","keywords":null,"cover":[],"text":"设置MAC版Mysql的配置文件1. 背景 Mac安装的Mysql8默认不会生成配置文件所以我需要创建个配置文件去让其加载。 使用 Navicat 导入备份的时候，出现了 This function has none of DETERMINISTIC, NO SQL, or RE...","link":"","photos":[],"count_time":{"symbolsCount":"4.4k","symbolsTime":"4 mins."},"categories":[{"name":"程序猿🐒","slug":"程序猿🐒","count":8,"path":"api/categories/程序猿🐒.json"},{"name":"奇怪的Mac知识点💻","slug":"程序猿🐒/奇怪的Mac知识点💻","count":2,"path":"api/categories/程序猿🐒/奇怪的Mac知识点💻.json"},{"name":"MySQL","slug":"程序猿🐒/奇怪的Mac知识点💻/MySQL","count":1,"path":"api/categories/程序猿🐒/奇怪的Mac知识点💻/MySQL.json"},{"name":"数据库","slug":"程序猿🐒/数据库","count":1,"path":"api/categories/程序猿🐒/数据库.json"}],"tags":[{"name":"MAC","slug":"MAC","count":2,"path":"api/tags/MAC.json"},{"name":"MySQL","slug":"MySQL","count":1,"path":"api/tags/MySQL.json"}],"author":{"name":"慎独丶九思","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"君子慎独，不欺暗室。<br />卑以自牧，含章可贞。","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}