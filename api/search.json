[{"id":"cd21b4e6b83aafed33281c82b1994424","title":"设置MAC版Mysql的配置文件","content":"设置MAC版Mysql的配置文件1. 背景\n\n\n\n\n\n\n\n\nMac安装的Mysql8默认不会生成配置文件所以我需要创建个配置文件去让其加载。\n使用 Navicat 导入备份的时候，出现了 This function has none of DETERMINISTIC, NO SQL, or READS SQL DATA in its 的错误，备份里面是包含了创建的函数的，在本地环境和服务器环境不一样就报错了。百度后发现是由于以下原因导致：\n\n\n\n\n\n\n\n\n\n创建函数时必须指定我们的函数是否是\n\nDETERMINISTIC 不确定的\nNO SQL 没有 SQL 语句，当然也不会修改数据\nREADS SQL DATA 只是读取数据，当然也不会修改数据\nMODIFIES SQL DATA 要修改数据\nCONTAINS SQL 包含了 SQL 语句\n\n解决方法：\n1、在 MySQL 数据库中执行以下语句，临时生效，重启后失效\nset global log_bin_trust_function_creators&#x3D;TRUE;\n\n2、在配置文件 my.ini 的 [mysqld] 配置，永久生效\nlog_bin_trust_function_creators&#x3D;1\n解决方法如下：\n1、在 MySQL 数据库中执行以下语句，临时生效，重启后失效\nset global log_bin_trust_function_creators&#x3D;TRUE;\n\n2、在配置文件 my.ini 的 [mysqld] 配置，永久生效\nlog_bin_trust_function_creators&#x3D;1\n\n2. 配置文件2.1 创建my.cnfMySQL默认安装在/usr/local/mysql-8.0.29-macos12-arm64\n\n在&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;support-files文件夹下创建my.cnf 内容如下：\n# Example MySQL config file for small systems.\n#\n# This is for a system with little memory (&lt;&#x3D; 64M) where MySQL is only used\n# from time to time and it&#39;s important that the mysqld daemon\n# doesn&#39;t use much resources.\n#\n# MySQL programs look for option files in a set of\n# locations which depend on the deployment platform.\n# You can copy this option file to one of those\n# locations. For information about these locations, see:\n# http:&#x2F;&#x2F;dev.mysql.com&#x2F;doc&#x2F;mysql&#x2F;en&#x2F;option-files.html\n#\n# In this file, you can use all long options that a program supports.\n# If you want to know which options a program supports, run the program\n# with the &quot;--help&quot; option.\n# The following options will be passed to all MySQL clients\n[client]\ndefault-character-set&#x3D;utf8\n#password &#x3D; your_password\nport        &#x3D; 3336\nsocket      &#x3D; &#x2F;tmp&#x2F;mysql.sock\n# Here follows entries for some specific programs\n# The MySQL server\n[mysqld]\nsql_mode&#x3D;STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION\ndefault-storage-engine&#x3D;INNODB\ncharacter-set-server&#x3D;utf8\ncollation-server&#x3D;utf8_general_ci\nsocket      &#x3D; &#x2F;tmp&#x2F;mysql.sock\nlog_bin_trust_function_creators&#x3D;1\n# lower_case_table_names &#x3D; 1    # 是否对sql语句大小写敏感，1表示不敏感，即不区分大小写\n# skip-external-locking\n# key_buffer_size &#x3D; 16K\n# max_allowed_packet &#x3D; 1M\n# table_open_cache &#x3D; 4\n# sort_buffer_size &#x3D; 64K\n# read_buffer_size &#x3D; 256K\n# read_rnd_buffer_size &#x3D; 256K\n# net_buffer_length &#x3D; 2K\n# thread_stack &#x3D; 256K   # 该字段根据需要修改，默认是128K，我的是因为启动报了这个字段的错导致启动失败，所以我改成256K了\n\n# Don&#39;t listen on a TCP&#x2F;IP port at all. This can be a security enhancement,\n# if all processes that need to connect to mysqld run on the same host.\n# All interaction with mysqld must be made via Unix sockets or named pipes.\n# Note that using this option without enabling named pipes on Windows\n# (using the &quot;enable-named-pipe&quot; option) will render mysqld useless!\n#\n#skip-networking\nserver-id   &#x3D; 1\n# Uncomment the following if you want to log updates\n#log-bin&#x3D;mysql-bin\n# binary logging format - mixed recommended\n#binlog_format&#x3D;mixed\n# Causes updates to non-transactional engines using statement format to be\n# written directly to binary log. Before using this option make sure that\n# there are no dependencies between transactional and non-transactional\n# tables such as in the statement INSERT INTO t_myisam SELECT * FROM\n# t_innodb; otherwise, slaves may diverge from the master.\n#binlog_direct_non_transactional_updates&#x3D;TRUE\n# Uncomment the following if you are using InnoDB tables\n#innodb_data_home_dir &#x3D; &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data\n#innodb_data_file_path &#x3D; ibdata1:10M:autoextend\n#innodb_log_group_home_dir &#x3D; &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data\n# You can set .._buffer_pool_size up to 50 - 80 %\n# of RAM but beware of setting memory usage too high\n#innodb_buffer_pool_size &#x3D; 16M\n#innodb_additional_mem_pool_size &#x3D; 2M\n# Set .._log_file_size to 25 % of buffer pool size\n#innodb_log_file_size &#x3D; 5M\n#innodb_log_buffer_size &#x3D; 8M\n#innodb_flush_log_at_trx_commit &#x3D; 1\n#innodb_lock_wait_timeout &#x3D; 50\n[mysqldump]\nquick\n# max_allowed_packet &#x3D; 16M\n[mysql]\nno-auto-rehash\n# Remove the next comment character if you are not familiar with SQL\n#safe-updates\n[myisamchk]\n# key_buffer_size &#x3D; 8M\n# sort_buffer_size &#x3D; 8M\n[mysqlhotcopy]\ninteractive-timeout\n\n2.2 配置my.cnf\n2.3 重启数据库\n","slug":"设置MAC版Mysql的配置文件","date":"2022-12-01T02:12:51.000Z","categories_index":"","tags_index":"MAC,MySQL","author_index":"慎独丶九思"},{"id":"b9663f58f18133b35bfe243f3e916a80","title":"Hello World","content":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.\nQuick StartCreate a new post$ hexo new &quot;My New Post&quot;\n\nMore info: Writing\nRun server$ hexo server\n\nMore info: Server\nGenerate static files$ hexo generate\n\nMore info: Generating\nDeploy to remote sites$ hexo deploy\n\nMore info: Deployment\n","slug":"hello-world","date":"2022-11-30T02:00:19.576Z","categories_index":"","tags_index":"","author_index":"慎独丶九思"}]